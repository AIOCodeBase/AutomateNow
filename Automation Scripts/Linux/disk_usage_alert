#!/bin/bash
# monitor disk usage and send alerts for high usage

# threshold percentage for alert
threshold=85

# check each mounted filesystem
df -h | grep -vE '^Filesystem|tmpfs|cdrom' | awk '{ print $5 " " $1 }' | while read output; do
    usage=$(echo $output | awk '{ print $1}' | cut -d'%' -f1)
    partition=$(echo $output | awk '{ print $2 }')

    if [ $usage -ge $threshold ]; then
        echo "ALERT: Partition $partition is ${usage}% full"
        # log to system log
        logger "Disk usage alert: $partition is ${usage}% full"

        # optionally send email notification
        # echo "Disk usage alert: $partition is ${usage}% full" | mail -s "Disk Alert" admin@example.com
    else
        echo "Partition $partition: ${usage}% used (normal)"
    fi
done